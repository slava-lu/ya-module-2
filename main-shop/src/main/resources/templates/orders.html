<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<meta charset="utf-8">

<head>
    <title>Заказы</title>
    <style>
        .menu { width:100%; }
        .menu > * { float: right; margin-left: 12px; }
        .btn-link {
            background: none; border: none; padding: 0; margin: 0;
            font: inherit; color: inherit; cursor: pointer; text-decoration: underline;
        }
        .clearfix::after { content: ""; display: table; clear: both; }
    </style>
</head>

<body>


    <form sec:authorize="isAuthenticated()"
          th:action="@{/logout}" method="post" style="display:inline;">
        <button class="btn-link"><b>ВЫЙТИ &cudarrr;</b></button>
    </form>

    <a sec:authorize="isAnonymous()" th:href="@{/login}">
        <b>ВОЙТИ &cudarrr;</b>
    </a>

    <a sec:authorize="isAuthenticated()" href="/cart/items"><b>КОРЗИНА &cudarrr;</b></a>

    <a href="/main/items"><b>ГЛАВНАЯ &cudarrr;</b></a>
</nav>

<table style="width:70%;margin-left:auto;margin-right:auto;">
    <tr th:each="order : ${orders}">
        <td>
            <h2>
                <a th:text="${'Заказ №'+order.id()}" th:href="${'/orders/'+order.id()}"></a>
            </h2>
            <table>
                <tr th:each="item : ${order.items()}">
                    <td th:text="${item.getTitle()+' ('+item.getCount()+' шт.) '+(item.getPrice()*item.getCount())+' руб.'}"></td>
                </tr>
            </table>
            <p>
                <b th:text="${'Сумма: '+order.totalSum()}+' руб.'"></b>
            </p>
        </td>
    </tr>
</table>
</body>

</html>
